{"filter":false,"title":"recover.c","tooltip":"/pset4/recover/recover.c","undoManager":{"mark":36,"position":36,"stack":[[{"start":{"row":0,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","","}",""],"id":1},{"start":{"row":0,"column":0},"end":{"row":95,"column":13},"action":"insert","lines":["#include<stdio.h>","#include<stdlib.h>","#include<stdint.h>","#include<cs50.h>","","","","//eliminate magic numbers","#define JAR 512","","//making a struct","typedef unsigned char BYTE;","","int main(int argc, char* argv[])","{","    if (argc != 2)","    {","        fprintf(stderr, \"Useage ./recover image name\\n\");","        return 1;","    }","","    //filename","    char* card = argv[1];","","    // open input file","    FILE* raw_data = fopen(card, \"r\");","","    if (raw_data == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", card);","        return 2;","    }","","    //buffer array","    BYTE buffer[JAR];","","    //to count recovered img number","    int counter;","    counter = 0;","","    //file pointer i'll be writing to","    FILE* img;","","    //name of jpeg is stored in this array 000.jpg\\0","    char picha[8];","","    while (fread(buffer, sizeof(buffer), 1, raw_data) == 1)","    {","","        if(buffer[0] == 0xff && buffer[1] == 0xd8 && buffer[2] == 0xff && (buffer[3] & 0xf0) == 0xe0)","        {","            if (counter > 0)","            {","                //close the already open file","                fclose(img);","","                //name outfile using sprintf","                sprintf(picha,\"%03d.jpg\", counter);","                counter =+1;","","                //open newfile for writing","                img = fopen(picha, \"w\");","","                // Write to outfile","                fwrite(buffer, sizeof(buffer), 1, img);","            }","            if (counter == 0)","            {","                //name outfile using sprintf","                sprintf(picha,\"%03d.jpg\", counter);","                counter =+1;","","                //open newfile for writing","                img = fopen(picha, \"w\");","","                // Write to outfile","                fwrite(buffer, sizeof(buffer), 1, img);","            }","","","","        }","        else if (counter > 0)","        {","","            fwrite(buffer, sizeof(buffer), 1, img);","        }","","","    }","","","    fclose(img);","    fclose(raw_data);","    //success","    return 0;"]}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":17},"action":"remove","lines":["//making a struct"],"id":2}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":25},"action":"remove","lines":["//eliminate magic numbers"],"id":3}],[{"start":{"row":33,"column":0},"end":{"row":34,"column":0},"action":"remove","lines":["    //buffer array",""],"id":4}],[{"start":{"row":35,"column":0},"end":{"row":36,"column":0},"action":"remove","lines":["    //to count recovered img number",""],"id":5}],[{"start":{"row":38,"column":0},"end":{"row":39,"column":0},"action":"remove","lines":["    //file pointer i'll be writing to",""],"id":6}],[{"start":{"row":40,"column":0},"end":{"row":41,"column":0},"action":"remove","lines":["    //name of jpeg is stored in this array 000.jpg\\0",""],"id":7}],[{"start":{"row":49,"column":0},"end":{"row":50,"column":0},"action":"remove","lines":["                //close the already open file",""],"id":8}],[{"start":{"row":51,"column":0},"end":{"row":52,"column":0},"action":"remove","lines":["                //name outfile using sprintf",""],"id":9}],[{"start":{"row":54,"column":0},"end":{"row":55,"column":0},"action":"remove","lines":["                //open newfile for writing",""],"id":10}],[{"start":{"row":56,"column":0},"end":{"row":57,"column":0},"action":"remove","lines":["                // Write to outfile",""],"id":11}],[{"start":{"row":60,"column":0},"end":{"row":61,"column":0},"action":"remove","lines":["                //name outfile using sprintf",""],"id":12}],[{"start":{"row":63,"column":0},"end":{"row":64,"column":0},"action":"remove","lines":["                //open newfile for writing",""],"id":13}],[{"start":{"row":65,"column":0},"end":{"row":66,"column":0},"action":"remove","lines":["                // Write to outfile",""],"id":14}],[{"start":{"row":83,"column":0},"end":{"row":84,"column":0},"action":"remove","lines":["    //success",""],"id":15}],[{"start":{"row":61,"column":24},"end":{"row":61,"column":26},"action":"remove","lines":["=+"],"id":16},{"start":{"row":61,"column":24},"end":{"row":61,"column":26},"action":"insert","lines":["+="]}],[{"start":{"row":52,"column":24},"end":{"row":52,"column":26},"action":"remove","lines":["=+"],"id":17},{"start":{"row":52,"column":24},"end":{"row":52,"column":26},"action":"insert","lines":["+="]}],[{"start":{"row":83,"column":13},"end":{"row":84,"column":0},"action":"insert","lines":["",""],"id":18},{"start":{"row":84,"column":0},"end":{"row":84,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":84,"column":0},"end":{"row":84,"column":4},"action":"remove","lines":["    "],"id":19}],[{"start":{"row":84,"column":0},"end":{"row":84,"column":1},"action":"insert","lines":["{"],"id":20}],[{"start":{"row":84,"column":0},"end":{"row":84,"column":1},"action":"remove","lines":["{"],"id":21}],[{"start":{"row":84,"column":0},"end":{"row":84,"column":1},"action":"insert","lines":["}"],"id":22}],[{"start":{"row":21,"column":0},"end":{"row":21,"column":14},"action":"remove","lines":["    //filename"],"id":23}],[{"start":{"row":24,"column":0},"end":{"row":24,"column":22},"action":"remove","lines":["    // open input file"],"id":24}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":[" "],"id":25}],[{"start":{"row":13,"column":25},"end":{"row":13,"column":26},"action":"remove","lines":[" "],"id":26}],[{"start":{"row":22,"column":9},"end":{"row":22,"column":10},"action":"remove","lines":[" "],"id":27}],[{"start":{"row":22,"column":8},"end":{"row":22,"column":9},"action":"insert","lines":[" "],"id":28}],[{"start":{"row":25,"column":8},"end":{"row":25,"column":9},"action":"insert","lines":[" "],"id":29}],[{"start":{"row":25,"column":10},"end":{"row":25,"column":11},"action":"remove","lines":[" "],"id":30}],[{"start":{"row":38,"column":8},"end":{"row":38,"column":9},"action":"insert","lines":[" "],"id":31}],[{"start":{"row":38,"column":10},"end":{"row":38,"column":11},"action":"remove","lines":[" "],"id":32}],[{"start":{"row":45,"column":10},"end":{"row":45,"column":11},"action":"insert","lines":[" "],"id":33}],[{"start":{"row":51,"column":30},"end":{"row":51,"column":31},"action":"insert","lines":[" "],"id":34}],[{"start":{"row":52,"column":26},"end":{"row":52,"column":27},"action":"insert","lines":[" "],"id":35}],[{"start":{"row":60,"column":30},"end":{"row":60,"column":31},"action":"insert","lines":[" "],"id":36}],[{"start":{"row":61,"column":26},"end":{"row":61,"column":27},"action":"insert","lines":[" "],"id":37}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":61,"column":27},"end":{"row":61,"column":27},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1600318562835,"hash":"5f78805e462f4492c3b01f4bb0a35c6290a5029e"}